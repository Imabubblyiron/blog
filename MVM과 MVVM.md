# 아키텍처 MVP와 MVVM



## MVP pattern
‘MVP 패턴’은 Model, View, Presenter의 앞글자를 따서 이름이 지어졌다. 이 패턴의 핵심 아이디어는 사용자 인터페이스(View)와 비즈니스 로직(Model)을 분 리하고, 서로간에 상호작용을 다른 객체(Presenter)에 위임해 서로의 영향을 최소화하는 것에 있다. 아래는 MVP의 각 component에 대한 정의이다.

### Model
내부적으로 쓰이는 데이터를 저장하고, 처리하는 역할을 합니다. 흔히 ‘비즈니스 로직’ 이라고 부르는 부분이다. 그리 View, Presenter등 다른 어떤 요소에도 의존적이지 않은 독립적인 영역이다.

### View
사용자 인터페이스(User Interface-UI)라 불리는 영역이다. 안드로이드에서는 Activity, Fragment를 대표적이 예로 볼 수 있다. Model에서 처리된 데이터를 Presenter를 통해 받아서 사용자에게 보여주며, 사용자 액션 및 Activity lifecycle 변화를 감지해서 Presenter에 보내는 역할을 한다. Presenter를 이용해 데이터를 주고받기 때문에 Presenter에 의존적이다.

### Presenter
Model과 View사이의 매개체이다. View에서 캐치한 유저 액션을 전달 받아서 Model의 로직을 호출하거나, Model의 로직으로부터 나온 결과를 전달 받아서 View에 보 내 UI변경을 야기하는 등 둘 사이의 소통의 역할을 하고, Model, View 모두에 의존적이다.

정리 - 
‘MVP패턴’을 이용해서 이와 같이 Model과 View간의 결합도를 낮추면, 새로운 기능을 추가하거나 변경할 필요가 있을 때 관련된 부분만 수정하면 되기 때문에 확장성이 좋 아지며, 테스트 코드를 작성하기 편리해지기 때문에 더 안전한 코드 작업이 가능해진다.

![](data:image/jpeg;base64,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)


## MVVM pattern
'MVVM 패턴'은 Model-View-ViewModel의 약자이다. Model은 UI에 표시될 데이터 와 비즈니스 로직을 담당하고 View는 UI를 의미하며 ViewModel은 이벤트 처리 나, Model과의 인터랙션 등을 담당한다. 아래는 MVVM의 각 component에 대한 정의이다.

### Model
DataModel 이라고도 불린다. ViewModel 에서 데이터를 가져갈 수 있게 데이터를 준비하고 이벤트를 보낸다.

### View
Model의 존재를 알지 못한다. UI의 업데이트를 위해 ViewModel과 바인딩이 하게된다. 즉 ViewModel의 상태가 변경되면 구독하고있는 view가 그 이벤트를 받아 UI를 갱신한다.

### ViewModel
View 와 Model 사이의 글루코드. Model에서 제공받은 데이터를 UI에서 필요한 정보로 가공한뒤 View가 가져갈 수 있도록 데이터 변경에 대한 이벤트를 보내주는 역할. View의 존재를 알지 못한다.
하나의 ViewModel은 여러개의 View 를 가질 수 있다. (MVP에서는 Presenter와 View가 one to one을 유지해야 하는데, MVVM에서는 many to one이다) View에 영향을 끼칠 수 있는 Model의 상태도 관리한다. View 또는 액티비티 Context에 대한 레퍼런스를 가져서는 안된다. View는 ViewModel의 레퍼런스를 가지지만, ViewModel은 View에 대한 정보가 전혀 없어야 한다.

정리 - 
View, Model, ViewModel은 서로의 존재를 알지 못해야 한다. ViewModel에서 View에게 갱신을 알리기 위해서는, Observable 또는 DataBinding을 사용해야 한다. 즉 ViewModel의 데이터가 수정되더라도, View에서는 수정할 것이 없도록 둘을 분리해야 한다. Model에는 데이터와 관련한 소스만, View는 화면과 관련한 소스만 넣는다. View에서 만약 데이터에 의한 변경들이 있으면 ViewModel의 옵저버 등을 통해서 값이 변경되었음을 알고 변경할 수 있다.

![](https://www.google.com/url?sa=i&source=images&cd=&ved=2ahUKEwjAwYbruY3mAhUPPXAKHcpBAxkQjRx6BAgBEAQ&url=https%3A%2F%2Flifeisforu.tistory.com%2F289&psig=AOvVaw017XrrEaqvvZMbONSe4e7e&ust=1575049247755381)

자세한 내용은 https://docs.microsoft.com/en-us/xamarin/xamarin-forms/enterprise-application-patterns/mvvm 참고한다.
